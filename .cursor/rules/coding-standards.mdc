# 编码规范

## 后端 (Python/FastAPI)

### 代码风格
- 使用 Python 3.9+ 语法
- 遵循 PEP 8 规范
- 使用 type hints 标注函数参数和返回值
- 异步函数使用 `async def`

### 文件命名
- 模块文件: `snake_case.py`
- 类名: `PascalCase`
- 函数/变量: `snake_case`
- 常量: `UPPER_SNAKE_CASE`

### API 路由规范
```python
@router.post("/items")
async def create_item(request: CreateItemRequest) -> ItemResponse:
    """创建新项目"""
    # 1. 验证请求
    # 2. 调用服务层
    # 3. 返回响应
    pass
```

### 服务层规范
- 所有生成服务必须接收 `project_id` 参数
- 服务层负责 OSS 上传，路由层不要重复上传
- 使用 `async/await` 处理异步操作

### 错误处理
```python
from fastapi import HTTPException

if not item:
    raise HTTPException(status_code=404, detail="Item not found")
```

## 前端 (React/TypeScript)

### 组件规范
- 使用函数组件 + Hooks
- 组件文件使用 `PascalCase.tsx`
- 工具函数使用 `camelCase.ts`

### 状态管理
- 使用 Zustand 管理全局状态
- 组件内部状态使用 `useState`
- 副作用使用 `useEffect`

### API 调用
```typescript
// services/api.ts
export const api = {
  items: {
    create: (data: CreateItemRequest) => 
      fetch('/api/items', { method: 'POST', body: JSON.stringify(data) })
  }
}
```

### 样式规范
- 优先使用 Ant Design 组件
- 自定义样式使用内联或 CSS Modules
- 遵循深色主题设计

## Git 提交规范

### Commit Message 格式
```
<type>: <description>

[optional body]
```

### Type 类型
- `feat`: 新功能
- `fix`: Bug 修复
- `docs`: 文档更新
- `style`: 代码格式
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具
